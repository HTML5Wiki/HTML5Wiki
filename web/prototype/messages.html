<!DOCTYPE html>
<html lang="de">
<head>
	<meta charset="utf-8" />
	<title>Aritkel | HTML5Wiki</title>
	<meta name="description" content="">
 	<meta name="author" content="HTML5Wiki">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
	<link rel="icon" href="favicon.ico" type="image/ico" />
	<link rel="stylesheet" href="css/html5wiki.css" /> 
	<!--script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js?ver=1.4.2"></script--> 
	<script type="text/javascript" src="js/jquery-nonproductive.js"></script>
</head> 
<body>
	<header class="header-overall">
		<a href="#" class="logo"><span class="hide">HTML5Wiki</span></a>
		<nav class="main-menu">
			<ol class="menu-items clearfix">
				<li class="item home"><a href="#" class="tab">Startseite</a></li>
				<li class="item updates"><a href="#" class="tab">Neuste Änderungen</a></li>
				<li class="item article active"><a href="#" class="tab">Der erste grosse Artikel im Prototyp</a></li>
				<li class="item search"><input placeholder="Suchen" class="searchterm" accesskey="s" /></li>
			</ol>
		</nav>
	</header>

	<article class="content article">
		<header class="title clearfix">
			<h1 class="heading">Der erste grosse Artikel im Prototyp</h1>
			<ol class="capsulebar">
				<li class="item first active read"><a href="#" class="capsule"><span class="caption">Lesen</span></a></li>
				<li class="item edit"><a href="#" class="capsule"><span class="caption">Bearbeiten</span></a></li>
				<li class="item last history"><a href="#" class="capsule"><span class="caption">&Auml;nderungsgeschichte</span></a></li>
			</ol>
		</header>
		
		<section>
			<p>
				Use links below to see message-prototypes.<br/>
				<em>Hint: Click fast to enqueue more than one messagebox into the queue.</em>
			</p>
			<p>
				<a href="#" onclick="showInfoMessage();">Info Message</a></br>
				<a href="#" onclick="showErrorMessage();">Error Message</a></br>
				<a href="#" onclick="showQuestionMessage();">Question</a>
			</p>
		</section>
	</article>
	
	<script type="text/javascript">
		/**
		 * Info-Message-Demo
		 */
		function showInfoMessage() {
			MessageController.addMessage('info','Dies ist eine Informations-Meldung.');
		}
		
		/**
		 * Error-Message-Demo
		 */
		function showErrorMessage() {
			MessageController.addMessage('error','Dies ist eine Fehlermeldung!');
		}
		
		/**
		 * Question-Message-Demo
		 */
		function showQuestionMessage() {
			var options = [
				{
					text : 'Ja'
					,button : true
					,callback : function() { alert('Coole Sau ;)'); }
				},{
					text : 'Nein, das tu\' ich nicht.'
					,callback : function() { alert('pf, schade, was?'); }
				}
			];
			MessageController.addMessage('question','Gehörst du zum HTML5Wiki Team?', options);
		}
		
		/**
		 * Handles the creation, management and control of messages for the
		 * GUI in one central place.
		 *
		 * @see MessageController#addMessage(type,message,options)
		 * @author Manuel Alabor
		 */
		var MessageController = (function() {
			var self = {}
				,messageQueue = new Array();
			
			/**
			 * Adds a Message with given parameters to the queue and ensures
			 * that the oldest queued message gets displayed.<br/>
			 * <br/>
			 * The parameter <code>options</code> enables you to display buttons
			 * together with your message.<br/>
			 * The following snippet shows how you can populate an array with
			 * the necessary information:
			 * <pre>
			 *     var options = [
			 *         {
			 *             text: 'OK'
			 *             ,button: true
			 *             ,callback: function() { console.log('OK clicked'); }
			 *         },{
			 *             text: 'Cancel'
			 *             ,callback: function() { console.log('Cancel clicked'); }
			 *         }
			 *     ];
			 * </pre>
			 *
			 * Along with the passed message type and text, the user will see a button
			 * labled "OK" and a link "Cancel".<br/>
			 * As soon as the user clicks on one of them, the specific callback method
			 * will be called.
			 *
			 * @param type		[info, error,  question]
			 * @param message	Messagetext
			 * @param options	An optional array with dictionary-items for each available option
			 * @access public
			 */
			self.addMessage = function(type, message, options) {
				var messageBox = createMessageBox(type, message, options);
				messageQueue = new Array(messageBox).concat(messageQueue);
			
				if($('.messagebox').size() == 0) self.displayMessageBox();
			}
		
			/**
			 * Checks the message queue for enqueued messages.<br/>
			 * If a message is available, it will be displayed.
			 *
			 * @access public
			 */
			self.displayMessageBox = function() {
				var latestBox = messageQueue.pop();
			
				if(latestBox != undefined) {
					$('.header-overall').after(latestBox);
					if($(latestBox).children('.question').size() == 0) {
						$(latestBox).slideDown().delay(2000).slideUp(function() {
							$(this).remove();
							self.displayMessageBox();
						});					
					} else {
						$(latestBox).slideDown();
					}

				}
			}
		
			/**
		     * Creates a messagebox DOM element with given parameters.
		     *
		     * @param type		[info, error, question]
		     * @param message	Message text
		     * @param options	Optional array with options
			 * @see MessageController#addMessage(type,message,options)
			 * @access private
		     */
			function createMessageBox(type, message, options) {
		        var messageOptions;
		        if(options != undefined && options.length > 0) {
		        	messageOptions = $('<div class="options" />');
		        	for(var i = 0, l = options.length; i < l; i++) {
		        		var showAsButton = options[i]['button'];
		        		var optionClass = ' class="option"';
		        		if(showAsButton) optionClass = ' class="button"';
		        		
		        		var option = $('<a href="#"' + optionClass + '>' + options[i]['text'] + '</a>');
		        		
		        		// Klick lässt zuerst MessageBox verschwinden.
		        		// Anschliessend wird das Callback aus option['callback']
		        		// ausgeführt.
		        		// Anschliessend werden etwaige weitere MessageBoxen angezeigt.
		        		$(option).bind('click', { callback : options[i]['callback'] }, function(event) {
		        			$(this).parents('.messagebox').slideUp(function() {
		        				$(this).remove();
		        				event.data.callback();
		        				self.displayMessageBox();
		        			});
		        		});
		        		
		        		$(messageOptions).append(option);
		        	}
		        }
		        
		        
		        var messagebox = $('<div class="messagebox" />');
		        var content = $('<div class="message ' + type + '">' + message + '</div>');
		        $(messagebox).append('<div class="barshadow">&nbsp;</div>');
		        if(messageOptions) $(content).append(messageOptions);
		        $(messagebox).append(content);
		        $(messagebox).hide();
		        
		        return messagebox;
			}
			
			return self;
		}());  // end MessageController
	</script>
	
</body>
</html>