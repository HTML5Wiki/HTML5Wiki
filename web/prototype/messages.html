<!DOCTYPE html>
<html lang="de">
<head>
	<meta charset="utf-8" />
	<title>Aritkel | HTML5Wiki</title>
	<meta name="description" content="">
 	<meta name="author" content="HTML5Wiki">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
	<link rel="icon" href="favicon.ico" type="image/ico" />
	<link rel="stylesheet" href="css/main.css" /> 
	<!--script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js?ver=1.4.2"></script--> 
	<script type="text/javascript" src="js/jquery-nonproductive.js"></script>
	
	<script type="text/javascript">
		/**
		 * Info-Message-Demo
		 */
		function showInfoMessage() {
			addMessageBox('info','Dies ist eine Informations-Meldung.');
		}
		
		/**
		 * Error-Message-Demo
		 */
		function showErrorMessage() {
			addMessageBox('error','Dies ist eine Fehlermeldung!');
		}
		
		/**
		 * Question-Message-Demo
		 */
		function showQuestionMessage() {
			var options = [
				{
					text : 'Ja'
					,button : true
					,callback : function() { alert('Coole Sau ;)'); }
				},{
					text : 'Nein, das tu\' ich nicht.'
					,callback : function() { alert('pf, schade, was?'); }
				}
			];
			addMessageBox('question','Gehörst du zum HTML5Wiki Team?', options);
		}
		
		
		
		var messageBoxes = new Array();
		/**
		 * Fügt dem Array messageBoxes eine neue MessageBox hinzu und
		 * zeigt mittels displayMessageBox() die (älteste anstehende)
		 * MessageBox an.
		 *
		 * @param type		info, error oder question
		 * @param message	Nachricht
		 * @param options	Array mit Dictionaries:
		 *                    text		Optionentext
		 *                    callback	Callback-Funktion
		 *                    button	Option als Button zeigen?
		 */
		function addMessageBox(type, message, options) {
			var messageBox = createMessageBox(type, message, options);
			messageBoxes = new Array(messageBox).concat(messageBoxes);
			
			if($('.messagebox').size() == 0) displayMessageBox();
		}
		
		/**
		 * Prüft das Array messageBoxes auf anstehende MessageBoxen.
		 * Ist eine vorhanden, wird diese aus dem Array entfernt und
		 * angezeigt.
		 */
		function displayMessageBox() {
			var latestBox = messageBoxes.pop();
			
			if(latestBox != undefined) {
				$('.header-overall').after(latestBox);
				if($(latestBox).children('.question').size() == 0) {
					$(latestBox).slideDown().delay(2000).slideUp(function() {
						$(this).remove();
						displayMessageBox();
					});					
				} else {
					$(latestBox).slideDown();
				}

			}
		}
		
		/**
		 * Erstellt eine MessageBox.
		 *
		 * @param type		info, error oder question
		 * @param message	Nachricht
		 * @param options	Array mit Dictionaries:
		 *                    text		Optionentext
		 *                    callback	Callback-Funktion
		 *                    button	Option als Button zeigen?
		 */
		function createMessageBox(type, message, options) {
			var messageOptions;
			if(options != undefined && options.length > 0) {
				messageOptions = $('<div class="options" />');
				for(var i = 0, l = options.length; i < l; i++) {
					var showAsButton = options[i]['button'];
					var optionClass = ' class="option"';
					if(showAsButton) optionClass = ' class="button"';
					
					var option = $('<a href="#"' + optionClass + '>' + options[i]['text'] + '</a>');
					
					// Klick lässt zuerst MessageBox verschwinden.
					// Anschliessend wird das Callback aus option['callback']
					// ausgeführt.
					// Anschliessend werden etwaige weitere MessageBoxen angezeigt.
					$(option).bind('click', { callback : options[i]['callback'] }, function(event) {
						$(this).parents('.messagebox').slideUp(function() {
							$(this).remove();
							event.data.callback();
							displayMessageBox();
						});
					});
					
					$(messageOptions).append(option);
				}
			}
			
			
			var messagebox = $('<div class="messagebox" />');
			var content = $('<div class="message ' + type + '">' + message + '</div>');
			$(messagebox).append('<div class="barshadow">&nbsp;</div>');
			if(messageOptions) $(content).append(messageOptions);
			$(messagebox).append(content);
			$(messagebox).hide();
			
			return messagebox;
		}
	</script>

</head> 
<body>
	<header class="header-overall">
		<a href="#" class="logo"><span class="hide">HTML5Wiki</span></a>
		<nav class="main-menu">
			<ol class="menu-items clearfix">
				<li class="item home"><a href="#" class="tab">Startseite</a></li>
				<li class="item updates"><a href="#" class="tab">Neuste Änderungen</a></li>
				<li class="item article"><a href="#" class="tab active">Der erste grosse Artikel im Prototyp</a></li>
				<li class="item search"><input placeholder="Suchen" class="searchterm" accesskey="s" /></li>
			</ol>
		</nav>
	</header>

	<article class="content article">
		<header class="title clearfix">
			<h1 class="heading">Der erste grosse Artikel im Prototyp</h1>
			<ol class="capsulebar">
				<li class="item first active read"><a href="#" class="capsule"><span class="caption">Lesen</span></a></li>
				<li class="item edit"><a href="#" class="capsule"><span class="caption">Bearbeiten</span></a></li>
				<li class="item last history"><a href="#" class="capsule"><span class="caption">&Auml;nderungsgeschichte</span></a></li>
			</ol>
		</header>
		
		<section>
			<p>
				Use links below to see message-prototypes.<br/>
				<em>Hint: Click fast to enqueue more than one messagebox into the queue.</em>
			</p>
			<p>
				<a href="#" onclick="showInfoMessage();">Info Message</a></br>
				<a href="#" onclick="showErrorMessage();">Error Message</a></br>
				<a href="#" onclick="showQuestionMessage();">Question</a>
			</p>
		</section>
	</article>
	
</body>
</html>